---
title: "Wordcloud_Tweet#Undertale"
author: "Perilium"
date: "2018/10/4"
output:
  html_document: default
---
# 主題：Undertale
Undertale是一個外國遊戲，遊戲大部分由Toby Fox自己一人完成(包含音樂、繪畫、寫程式)。適逢Undertale三周年???登上Nintendo Switch，此次便以其作為主題。

Undertale雖然已經三年，仍在國外十分流傳，時常能看見以其作為主題的二創或同人作，此次便調???在Twitter上，
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Libraries
Import needed libraries
```{r library}
library("wordcloud")
library("RColorBrewer")
library(tidytext)
library(dplyr)
library(stringr)
library(rtweet)
library(stopwords)
library(ggplot2)
```

## Twitter API
  Code hide for privacy and security.Example code below:  
create_token(  

     app = "Myappname",  
     consumer_key = "My consumer_key",  
     consumer_secret = "My comsumer_secret",  
     access_token = "My access_token",  
     access_secret = "My access_secret",  
)  
```{r API, include=FALSE}
create_token(
  app = "CSX4001",
  consumer_key = "os9BSEDDSzZKaa79hWbXeAUmm",
  consumer_secret = "K6KcZy4ZhQYpFoMWKKgZjVTXKSP4gAvTc760meWwmlQLJEWsAg",
  access_token = "3301954536-dvRxov51hUw3tU8yrJJnIDGHfhL0gVimjGX92u6",
  access_secret = "4Y7uewr8SyVmdAXuFBp2jXKskaLVuasmtPoizyR2Fx2x5",
)
```

## Tweet collect
  
```{r get}
#Grab tweets
hmt <- search_tweets(
  "#undertale", n = 10000, include_rts = FALSE
)
```

## Making Cloud

```{r cloud}

#Unnest the words - code via Tidy Text
hmtTable <- hmt %>% 
  unnest_tokens(word, text)

#remove stop words - aka typically very common words such as "the", "of" etc
data(stop_words)

hmtTable <- hmtTable %>%
  anti_join(stop_words)

#Remove other nonsense words

jpstop <- stopwords::stopwords("ja", source = "stopwords-iso")
hmtTable <-hmtTable %>%  filter(!word %in%  jpstop) %>%
  filter(!word %in% c("t.co","https","undertale","art","it's","2","描","3","day","見","1","de","っ","って","5","目","み","いい","アンダー","テール","つ","さん","たい","ま","中","一","した","フリ","スク","よ","てい","ちゃん","アンダ","たら","ね","アンテ","けど"))
hmtTable <- hmtTable %>%
  count(word, sort = TRUE) 
#do a word count

hmtTable

wordcloud(words = hmtTable$word, freq = hmtTable$n, min.freq = 50,
          random.order=FALSE, rot.per=0.35,scale = c(3, 1),
          colors=brewer.pal(12,"Paired" ))
```


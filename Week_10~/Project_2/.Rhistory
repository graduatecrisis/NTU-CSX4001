View(alldoc)
raw = read_html("https://www.metacritic.com/browse/games/score/metascore/year/pc/filtered?view=detailed&sort=desc&year_selected=2017&page=1")
name = raw %>% html_nodes("#main h3") %>% html_text(raw)
cri.rate = raw %>% html_nodes(".clamp-metascore .positive") %>% html_text(raw)
user.rate = raw %>% html_nodes(".user") %>% html_text(raw)
content = raw %>% html_nodes(".summary") %>% html_text(raw)
docs = data.frame(name,cri.rate,user.rate,content)
alldoc =data.frame(name=c(),cri.rate=c(),user.rate=c(),content=c())
raw = read_html("https://www.metacritic.com/browse/games/score/metascore/year/pc/filtered?view=detailed&sort=desc&year_selected=2017&page=")
raw = read_html("https://www.metacritic.com/browse/games/score/metascore/year/pc/filtered?view=detailed&sort=desc&year_selected=2017&page=")
0name = raw %>% html_nodes("#main h3") %>% html_text(raw)
raw = read_html("https://www.metacritic.com/browse/games/score/metascore/year/pc/filtered?view=detailed&sort=desc&year_selected=2017&page=0")
name = raw %>% html_nodes("#main h3") %>% html_text(raw)
cri.rate = raw %>% html_nodes(".clamp-metascore .positive") %>% html_text(raw)
user.rate = raw %>% html_nodes(".user") %>% html_text(raw)
content = raw %>% html_nodes(".summary") %>% html_text(raw)
docs = data.frame(name,cri.rate,user.rate,content)
alldoc = rbind(alldoc,docs)
raw = read_html("https://www.metacritic.com/browse/games/score/metascore/year/pc/filtered?view=detailed&sort=desc&year_selected=2017&page=1")
name = raw %>% html_nodes("#main h3") %>% html_text(raw)
cri.rate = raw %>% html_nodes(".clamp-metascore .positive") %>% html_text(raw)
user.rate = raw %>% html_nodes(".user") %>% html_text(raw)
content = raw %>% html_nodes(".summary") %>% html_text(raw)
docs = data.frame(name,cri.rate,user.rate,content)
alldoc = rbind(alldoc,docs)
View(alldoc)
raw = read_html("https://www.metacritic.com/browse/games/score/metascore/year/pc/filtered?view=detailed&sort=desc&year_selected=2017&page=2")
name = raw %>% html_nodes("#main h3") %>% html_text(raw)
cri.rate = raw %>% html_nodes(".clamp-metascore .positive") %>% html_text(raw)
user.rate = raw %>% html_nodes(".user") %>% html_text(raw)
content = raw %>% html_nodes(".summary") %>% html_text(raw)
docs = data.frame(name,cri.rate,user.rate,content)
alldoc = rbind(alldoc,docs)
View(alldoc)
cri.rate = raw %>% html_nodes(".clamp-metascore .positive") %>% html_text(raw)
raw
raw = read_html("https://www.metacritic.com/browse/games/score/metascore/year/pc/filtered?view=detailed&sort=desc&year_selected=2017&page=2")
name = raw %>% html_nodes("#main h3") %>% html_text(raw)
cri.rate = raw %>% html_nodes(".clamp-metascore .positive") %>% html_text(raw)
raw = read_html("https://www.metacritic.com/browse/games/score/metascore/year/pc/filtered?view=detailed&sort=desc&year_selected=2017&page=0")
name = raw %>% html_nodes("#main h3") %>% html_text(raw)
cri.rate = raw %>% html_nodes(".clamp-metascore .positive") %>% html_text(raw)
raw = read_html("https://www.metacritic.com/browse/games/score/metascore/year/pc/filtered?view=detailed&sort=desc&year_selected=2017&page=2")
name = raw %>% html_nodes("#main h3") %>% html_text(raw)
cri.rate = raw %>% html_nodes(".clamp-metascore .positive") %>% html_text(raw)
cri.rate = raw %>% html_nodes(".clamp-metascore .negative") %>% html_text(raw)
cri.rate = raw %>% html_nodes(".clamp-metascore") %>% html_text(raw)
cri.rate = raw %>% html_nodes(".clamp-metascore .positive,.clamp-metascore .negative") %>% html_text(raw)
cri.rate = raw %>% html_nodes(".clamp-metascore .positive,.mixed,.clamp-metascore .negative") %>% html_text(raw)
alldoc =data.frame(name=c(),cri.rate=c(),user.rate=c(),content=c())
raw = read_html(paste("https://www.metacritic.com/browse/games/score/metascore/year/pc/filtered?view=detailed&sort=desc&year_selected=2017&page=",i,sep="")
name = raw %>% html_nodes("#main h3") %>% html_text(raw)
cri.rate = raw %>% html_nodes(".clamp-metascore .positive,.mixed,.clamp-metascore .negative") %>% html_text(raw)
user.rate = raw %>% html_nodes(".user") %>% html_text(raw)
content = raw %>% html_nodes(".summary") %>% html_text(raw)
docs = data.frame(name,cri.rate,user.rate,content)
alldoc = rbind(alldoc,docs)
}
docs <- tm_map(docs, removePunctuation)
docs <- tm_map(docs, removeNumbers)
docs <- tm_map(docs, content_transformer(tolower))
docs <- tm_map(docs, removeWords,stopwords::stopwords(language = "en",source = "snowball"))
docsPTD <- tm_map(docs, PlainTextDocument)
for(i in c(0:2)){
i=0
raw = read_html(paste("https://www.metacritic.com/browse/games/score/metascore/year/pc/filtered?view=detailed&sort=desc&year_selected=2017&page=",i,sep="")
name = raw %>% html_nodes("#main h3") %>% html_text(raw)
cri.rate = raw %>% html_nodes(".clamp-metascore .positive,.mixed,.clamp-metascore .negative") %>% html_text(raw)
user.rate = raw %>% html_nodes(".user") %>% html_text(raw)
content = raw %>% html_nodes(".summary") %>% html_text(raw)
docs = data.frame(name,cri.rate,user.rate,content)
alldoc = rbind(alldoc,docs)
}
docs <- tm_map(docs, removePunctuation)
docs <- tm_map(docs, removeNumbers)
docs <- tm_map(docs, content_transformer(tolower))
docs <- tm_map(docs, removeWords,stopwords::stopwords(language = "en",source = "snowball"))
docsPTD <- tm_map(docs, PlainTextDocument)
raw = read_html(paste("https://www.metacritic.com/browse/games/score/metascore/year/pc/filtered?view=detailed&sort=desc&year_selected=2017&page=",i,sep="")
name = raw %>% html_nodes("#main h3") %>% html_text(raw)
cri.rate = raw %>% html_nodes(".clamp-metascore .positive,.mixed,.clamp-metascore .negative") %>% html_text(raw)
user.rate = raw %>% html_nodes(".user") %>% html_text(raw)
content = raw %>% html_nodes(".summary") %>% html_text(raw)
docs = data.frame(name,cri.rate,user.rate,content)
alldoc = rbind(alldoc,docs)
}
docs <- tm_map(docs, removePunctuation)
docs <- tm_map(docs, removeNumbers)
docs <- tm_map(docs, content_transformer(tolower))
docs <- tm_map(docs, removeWords,stopwords::stopwords(language = "en",source = "snowball"))
docsPTD <- tm_map(docs, PlainTextDocument)
raw = read_html(paste("https://www.metacritic.com/browse/games/score/metascore/year/pc/filtered?view=detailed&sort=desc&year_selected=2017&page=",i,sep="")
name = raw %>% html_nodes("#main h3") %>% html_text(raw)
cri.rate = raw %>% html_nodes(".clamp-metascore .positive,.mixed,.clamp-metascore .negative") %>% html_text(raw)
user.rate = raw %>% html_nodes(".user") %>% html_text(raw)
content = raw %>% html_nodes(".summary") %>% html_text(raw)
docs = data.frame(name,cri.rate,user.rate,content)
alldoc = rbind(alldoc,docs)
}
docs <- tm_map(docs, removePunctuation)
docs <- tm_map(docs, removeNumbers)
docs <- tm_map(docs, content_transformer(tolower))
docs <- tm_map(docs, removeWords,stopwords::stopwords(language = "en",source = "snowball"))
docsPTD <- tm_map(docs, PlainTextDocument)
raw = read_html(paste("https://www.metacritic.com/browse/games/score/metascore/year/pc/filtered?view=detailed&sort=desc&year_selected=2017&page=",i,sep="")
paste("https://www.metacritic.com/browse/games/score/metascore/year/pc/filtered?view=detailed&sort=desc&year_selected=2017&page=",i,sep=""_
paste("https://www.metacritic.com/browse/games/score/metascore/year/pc/filtered?view=detailed&sort=desc&year_selected=2017&page=",i,sep="")  raw = read_html(paste("https://www.metacritic.com/browse/games/score/metascore/year/pc/filtered?view=detailed&sort=desc&year_selected=2017&page=",i,sep="")
paste("https://www.metacritic.com/browse/games/score/metascore/year/pc/filtered?view=detailed&sort=desc&year_selected=2017&page=",i,sep="")
raw = read_html(URL)
URL=paste("https://www.metacritic.com/browse/games/score/metascore/year/pc/filtered?view=detailed&sort=desc&year_selected=2017&page=",i,sep="")
raw = read_html(URL)
alldoc =data.frame(name=c(),cri.rate=c(),user.rate=c(),content=c())
for(i in c(0:1)){
URL=paste("https://www.metacritic.com/browse/games/score/metascore/year/pc/filtered?view=detailed&sort=desc&year_selected=2017&page=",i,sep="")
raw = read_html(URL)
name = raw %>% html_nodes("#main h3") %>% html_text(raw)
cri.rate = raw %>% html_nodes(".clamp-metascore .positive,.mixed,.clamp-metascore .negative") %>% html_text(raw)
user.rate = raw %>% html_nodes(".user") %>% html_text(raw)
content = raw %>% html_nodes(".summary") %>% html_text(raw)
docs = data.frame(name,cri.rate,user.rate,content)
alldoc = rbind(alldoc,docs)
}
for(i in c(0:1)){
URL=paste("https://www.metacritic.com/browse/games/score/metascore/year/pc/filtered?view=detailed&sort=desc&year_selected=2017&page=",i,sep="")
raw = read_html(URL)
name = raw %>% html_nodes("#main h3") %>% html_text(raw)
cri.rate = raw %>% html_nodes(".clamp-metascore .positive") %>% html_text(raw)
user.rate = raw %>% html_nodes(".user") %>% html_text(raw)
content = raw %>% html_nodes(".summary") %>% html_text(raw)
docs = data.frame(name,cri.rate,user.rate,content)
alldoc = rbind(alldoc,docs)
}
View(alldoc)
for(i in c(0:1)){
URL=paste("https://www.metacritic.com/browse/games/score/metascore/year/pc/filtered?view=detailed&sort=desc&year_selected=2017&page=",i,sep="")
raw = read_html(URL)
name = raw %>% html_nodes("#main h3") %>% html_text(raw)
cri.rate = raw %>% html_nodes(".clamp-metascore .positive") %>% html_text(raw)
user.rate = raw %>% html_nodes(".user") %>% html_text(raw)
content = raw %>% html_nodes(".summary") %>% html_text(raw)
date = raw %>% html_nodes("#main .label+ span") %>% html_text(raw)
docs = data.frame(name,cri.rate,user.rate,date,content)
alldoc = rbind(alldoc,docs)
}
alldoc =data.frame(name=c(),cri.rate=c(),user.rate=c(),date=c(),content=c())
for(i in c(0:1)){
URL=paste("https://www.metacritic.com/browse/games/score/metascore/year/pc/filtered?view=detailed&sort=desc&year_selected=2017&page=",i,sep="")
raw = read_html(URL)
name = raw %>% html_nodes("#main h3") %>% html_text(raw)
cri.rate = raw %>% html_nodes(".clamp-metascore .positive") %>% html_text(raw)
user.rate = raw %>% html_nodes(".user") %>% html_text(raw)
content = raw %>% html_nodes(".summary") %>% html_text(raw)
date = raw %>% html_nodes("#main .label+ span") %>% html_text(raw)
docs = data.frame(name,cri.rate,user.rate,date,content)
alldoc = rbind(alldoc,docs)
}
View(alldoc)
alldoc$date = as.date(alldoc,"%B %d,%Y")
library(date)
library(rdate)
install.packages("date")
library(rdate)
library(date)
alldoc$date = as.date(alldoc,"%B %d,%Y")
alldoc$date = as.date(alldoc,"%B %d, %Y")
alldoc$date = as.date(alldoc,"%B %d, %Y")
alldoc$date = as.date(alldoc,format="%B %d, %Y")
alldoc$date = as.date(alldoc,format="%B %d %Y")
date = as.date(date)
date = as.date(date,format = "%B")
date = raw %>% html_nodes("#main .label+ span") %>% html_text(raw)
date = as.date(date,format = "%B")
date = as.date(date)
date = raw %>% html_nodes("#main .label+ span") %>% html_text(raw)
date = as.date(date,,format = "%B")
date = as.date(date)
format(date, format="%B")
date = format(date, format="%B")
date = raw %>% html_nodes("#main .label+ span") %>% html_text(raw)
cordoc = Corpus(VectorSource(list.rating))
cordoc = Corpus(VectorSource(alldoc))
View(cordoc)
cordoc <- tm_map(cordoc, removePunctuation)
cordoc <- tm_map(cordoc, removeNumbers)
cordoc <- tm_map(cordoc, content_transformer(tolower))
cordoc <- tm_map(cordoc, removeWords,stopwords::stopwords(language = "en",source = "snowball"))
cordocPTD <- tm_map(cordoc, PlainTextDocument)
View(cordocPTD)
View(cordoc)
setwd("C:/Users/perot/Desktop/NTU-CSX4001/Week_10~/Project_2")
write.csv(alldoc,"2017.csv")
View(alldoc)
read.csv(2017dat,"2017.csv")
read.csv(dat,"2017.csv")
cordoc = Corpus(VectorSource(alldoc,))
dat = read.csv("2017.csv")
View(dat)
format(date,format = "%B")
date = format(date,format = "%B")
date = format(date,format = "%m")
date = raw %>% html_nodes("#main .label+ span") %>% html_text(raw)
date
date = as.date(date)
date
date = format(date,format = "%B")
date = raw %>% html_nodes("#main .label+ span") %>% html_text(raw)
date = as.date(date)
date
date = as.date(date,format="%B")
date = raw %>% html_nodes("#main .label+ span") %>% html_text(raw)
date = as.date(date,format="%B")
date
date = as.date(date)
format(date,format = "%B")
date = as.date(date)
format(date,format = "%Y")
date = raw %>% html_nodes("#main .label+ span") %>% html_text(raw)
date = as.date(date)
date
cordoc <- tm_map(cordoc, removePunctuation)
cordoc <- tm_map(cordoc, removeNumbers)
cordoc <- tm_map(cordoc, content_transformer(tolower))
cordoc <- tm_map(cordoc, removeWords,stopwords::stopwords(language = "en",source = "snowball"))
cordoc
date <- as.character(date)
date = as.date(date)
format(date,format = "%Y")
date <- as.character(date)
format(date,format = "%Y")
help(strftime)
strftime(date,format="%b")
date = as.date(date)
strftime(date,format="%b")
date = strftime(date,format="%B")
date = strftime(date,format="%m")
date = as.date(date)
date = strftime(date,format="%m")
date = raw %>% html_nodes("#main .label+ span") %>% html_text(raw)
date = as.date(date)
date = strftime(date,format="%m")
alldoc =data.frame(name=c(),cri.rate=c(),user.rate=c(),date=c(),content=c())
for(i in c(0:1)){
URL=paste("https://www.metacritic.com/browse/games/score/metascore/year/pc/filtered?view=detailed&sort=desc&year_selected=2017&page=",i,sep="")
raw = read_html(URL)
name = raw %>% html_nodes("#main h3") %>% html_text(raw)
cri.rate = raw %>% html_nodes(".clamp-metascore .positive") %>% html_text(raw)
user.rate = raw %>% html_nodes(".user") %>% html_text(raw)
content = raw %>% html_nodes(".summary") %>% html_text(raw)
date = raw %>% html_nodes("#main .label+ span") %>% html_text(raw)
date = as.date(date)
date = strftime(date,format="%m")
docs = data.frame(name,cri.rate,user.rate,date,content)
alldoc = rbind(alldoc,docs)
}
plotly(alldoc,x=~date,type="histogram")
library(plotly)
plotly(alldoc,x=~date,type="histogram")
help("plotly")
plot_ly(alldoc,x=~date,type="histogram")
plot_ly(alldoc,x=~cri.rate,y=~user.rate,type = "scatter")
alldoc$cri.rate = as.integer(alldoc$cri.rate)
alldoc$user.rate = as.integer(alldoc$user.rate)
plot_ly(alldoc,x=~cri.rate,y=~user.rate,type = "scatter")
alldoc$user.rate = as.float(alldoc$user.rate)
plot_ly(alldoc,x=~date,type="histogram")
plot_ly(alldoc,x=~cri.rate,y=~user.rate,type = "scatter")
cri.rate = raw %>% html_nodes(".clamp-metascore .positive") %>% html_text(raw)
cri.rate = as.integer(cri.rate)
user.rate = as.float(user.rate)
user.rate = as.vector(user.rate)
user.rate = as.vector(user.rate)
plot_ly(alldoc,x=~cri.rate,y=~user.rate,type = "scatter")
user.rate = as.double(user.rate)
for(i in c(0:1)){
URL=paste("https://www.metacritic.com/browse/games/score/metascore/year/pc/filtered?view=detailed&sort=desc&year_selected=2017&page=",i,sep="")
raw = read_html(URL)
name = raw %>% html_nodes("#main h3") %>% html_text(raw)
cri.rate = raw %>% html_nodes(".clamp-metascore .positive") %>% html_text(raw)
user.rate = raw %>% html_nodes(".user") %>% html_text(raw)
cri.rate = as.integer(cri.rate)
user.rate = as.double(user.rate)
content = raw %>% html_nodes(".summary") %>% html_text(raw)
date = raw %>% html_nodes("#main .label+ span") %>% html_text(raw)
date = as.date(date)
date = strftime(date,format="%m")
docs = data.frame(name,cri.rate,user.rate,date,content)
alldoc = rbind(alldoc,docs)
}
View(alldoc)
alldoc =data.frame(name=c(),cri.rate=c(),user.rate=c(),date=c(),content=c())
for(i in c(0:1)){
URL=paste("https://www.metacritic.com/browse/games/score/metascore/year/pc/filtered?view=detailed&sort=desc&year_selected=2017&page=",i,sep="")
raw = read_html(URL)
name = raw %>% html_nodes("#main h3") %>% html_text(raw)
cri.rate = raw %>% html_nodes(".clamp-metascore .positive") %>% html_text(raw)
user.rate = raw %>% html_nodes(".user") %>% html_text(raw)
cri.rate = as.integer(cri.rate)
user.rate = as.double(user.rate)
content = raw %>% html_nodes(".summary") %>% html_text(raw)
date = raw %>% html_nodes("#main .label+ span") %>% html_text(raw)
date = as.date(date)
date = strftime(date,format="%m")
docs = data.frame(name,cri.rate,user.rate,date,content)
alldoc = rbind(alldoc,docs)
}
View(alldoc)
plot_ly(alldoc,x=~cri.rate,y=~user.rate,type = "scatter")
plot_ly(alldoc,x=~cri.rate,y=~user.rate,type = "scatter",text = ~paste('遊戲名稱: ', Name))
plot_ly(alldoc,x=~cri.rate,y=~user.rate,type = "scatter",text = ~paste('遊戲名稱: ', ~name))
plot_ly(alldoc,x=~cri.rate,y=~user.rate,type = "scatter",text = ~paste('遊戲名稱: ', name))
write.csv(alldoc,"2017.csv")
alldoc =data.frame(name=c(),cri.rate=c(),user.rate=c(),date=c(),content=c())
for(i in c(0:1)){
URL=paste("https://www.metacritic.com/browse/games/score/metascore/year/pc/filtered?view=detailed&sort=desc&year_selected=2016&page=",i,sep="")
raw = read_html(URL)
name = raw %>% html_nodes("#main h3") %>% html_text(raw)
cri.rate = raw %>% html_nodes(".clamp-metascore .positive") %>% html_text(raw)
user.rate = raw %>% html_nodes(".user") %>% html_text(raw)
cri.rate = as.integer(cri.rate)
user.rate = as.double(user.rate)
content = raw %>% html_nodes(".summary") %>% html_text(raw)
date = raw %>% html_nodes("#main .label+ span") %>% html_text(raw)
date = as.date(date)
date = strftime(date,format="%m")
docs = data.frame(name,cri.rate,user.rate,date,content)
alldoc = rbind(alldoc,docs)
}
alldoc =data.frame(name=c(),cri.rate=c(),user.rate=c(),date=c(),content=c())
for(i in c(0:2)){
URL=paste("https://www.metacritic.com/browse/games/score/metascore/year/pc/filtered?view=detailed&sort=desc&year_selected=2016&page=",i,sep="")
raw = read_html(URL)
name = raw %>% html_nodes("#main h3") %>% html_text(raw)
cri.rate = raw %>% html_nodes(".clamp-metascore .positive") %>% html_text(raw)
user.rate = raw %>% html_nodes(".user") %>% html_text(raw)
cri.rate = as.integer(cri.rate)
user.rate = as.double(user.rate)
content = raw %>% html_nodes(".summary") %>% html_text(raw)
date = raw %>% html_nodes("#main .label+ span") %>% html_text(raw)
date = as.date(date)
date = strftime(date,format="%m")
docs = data.frame(name,cri.rate,user.rate,date,content)
alldoc = rbind(alldoc,docs)
}
View(alldoc)
cri.rate = raw %>% html_nodes(".clamp-metascore .positive,.mixed") %>% html_text(raw)
i=0
cri.rate = raw %>% html_nodes(".clamp-metascore .positive,.mixed") %>% html_text(raw)
cri.rate = raw %>% html_nodes(".clamp-metascore .positive,#main.mixed") %>% html_text(raw)
URL=paste("https://www.metacritic.com/browse/games/score/metascore/year/pc/filtered?view=detailed&sort=desc&year_selected=2016&page=",i,sep="")
raw = read_html(URL)
name = raw %>% html_nodes("#main h3") %>% html_text(raw)
cri.rate = raw %>% html_nodes(".clamp-metascore .positive,#main .mixed") %>% html_text(raw)
cri.rate = raw %>% html_nodes(".clamp-metascore .positive,.clamp-metascore .mixed") %>% html_text(raw)
cri.rate = raw %>% html_nodes(".clamp-metascore .positive,.clamp-metascore .mixed,.clamp-metascore .negative") %>% html_text(raw)
for(i in c(0:2)){
URL=paste("https://www.metacritic.com/browse/games/score/metascore/year/pc/filtered?view=detailed&sort=desc&year_selected=2016&page=",i,sep="")
raw = read_html(URL)
name = raw %>% html_nodes("#main h3") %>% html_text(raw)
cri.rate = raw %>% html_nodes(".clamp-metascore .positive,.clamp-metascore .mixed,.clamp-metascore .negative") %>% html_text(raw)
user.rate = raw %>% html_nodes(".user") %>% html_text(raw)
cri.rate = as.integer(cri.rate)
user.rate = as.double(user.rate)
content = raw %>% html_nodes(".summary") %>% html_text(raw)
date = raw %>% html_nodes("#main .label+ span") %>% html_text(raw)
date = as.date(date)
date = strftime(date,format="%m")
docs = data.frame(name,cri.rate,user.rate,date,content)
alldoc = rbind(alldoc,docs)
}
alldoc =data.frame(name=c(),cri.rate=c(),user.rate=c(),date=c(),content=c())
for(i in c(0:2)){
URL=paste("https://www.metacritic.com/browse/games/score/metascore/year/pc/filtered?view=detailed&sort=desc&year_selected=2017&page=",i,sep="")
raw = read_html(URL)
name = raw %>% html_nodes("#main h3") %>% html_text(raw)
cri.rate = raw %>% html_nodes(".clamp-metascore .positive,.clamp-metascore .mixed,.clamp-metascore .negative") %>% html_text(raw)
user.rate = raw %>% html_nodes(".user") %>% html_text(raw)
cri.rate = as.integer(cri.rate)
user.rate = as.double(user.rate)
content = raw %>% html_nodes(".summary") %>% html_text(raw)
date = raw %>% html_nodes("#main .label+ span") %>% html_text(raw)
date = as.date(date)
date = strftime(date,format="%m")
docs = data.frame(name,cri.rate,user.rate,date,content)
alldoc = rbind(alldoc,docs)
}
View(alldoc)
write.csv(alldoc,"2017.csv")
for(i in c(0:3)){
URL=paste("https://www.metacritic.com/browse/games/score/metascore/year/pc/filtered?view=detailed&sort=desc&year_selected=2016&page=",i,sep="")
raw = read_html(URL)
name = raw %>% html_nodes("#main h3") %>% html_text(raw)
cri.rate = raw %>% html_nodes(".clamp-metascore .positive,.clamp-metascore .mixed,.clamp-metascore .negative") %>% html_text(raw)
user.rate = raw %>% html_nodes(".user") %>% html_text(raw)
cri.rate = as.integer(cri.rate)
user.rate = as.double(user.rate)
content = raw %>% html_nodes(".summary") %>% html_text(raw)
date = raw %>% html_nodes("#main .label+ span") %>% html_text(raw)
date = as.date(date)
date = strftime(date,format="%m")
docs = data.frame(name,cri.rate,user.rate,date,content)
alldoc = rbind(alldoc,docs)
}
alldoc =data.frame(name=c(),cri.rate=c(),user.rate=c(),date=c(),content=c())
for(i in c(0:3)){
URL=paste("https://www.metacritic.com/browse/games/score/metascore/year/pc/filtered?view=detailed&sort=desc&year_selected=2016&page=",i,sep="")
raw = read_html(URL)
name = raw %>% html_nodes("#main h3") %>% html_text(raw)
cri.rate = raw %>% html_nodes(".clamp-metascore .positive,.clamp-metascore .mixed,.clamp-metascore .negative") %>% html_text(raw)
user.rate = raw %>% html_nodes(".user") %>% html_text(raw)
cri.rate = as.integer(cri.rate)
user.rate = as.double(user.rate)
content = raw %>% html_nodes(".summary") %>% html_text(raw)
date = raw %>% html_nodes("#main .label+ span") %>% html_text(raw)
date = as.date(date)
date = strftime(date,format="%m")
docs = data.frame(name,cri.rate,user.rate,date,content)
alldoc = rbind(alldoc,docs)
}
View(alldoc)
write.csv(alldoc,"2016.csv")
for(i in c(0:3)){
URL=paste("https://www.metacritic.com/browse/games/score/metascore/year/pc/filtered?view=detailed&sort=desc&year_selected=2015&page=",i,sep="")
raw = read_html(URL)
name = raw %>% html_nodes("#main h3") %>% html_text(raw)
cri.rate = raw %>% html_nodes(".clamp-metascore .positive,.clamp-metascore .mixed,.clamp-metascore .negative") %>% html_text(raw)
user.rate = raw %>% html_nodes(".user") %>% html_text(raw)
cri.rate = as.integer(cri.rate)
user.rate = as.double(user.rate)
content = raw %>% html_nodes(".summary") %>% html_text(raw)
date = raw %>% html_nodes("#main .label+ span") %>% html_text(raw)
date = as.date(date)
date = strftime(date,format="%m")
docs = data.frame(name,cri.rate,user.rate,date,content)
alldoc = rbind(alldoc,docs)
}
View(alldoc)
alldoc =data.frame(name=c(),cri.rate=c(),user.rate=c(),date=c(),content=c())
for(i in c(0:3)){
URL=paste("https://www.metacritic.com/browse/games/score/metascore/year/pc/filtered?view=detailed&sort=desc&year_selected=2015&page=",i,sep="")
raw = read_html(URL)
name = raw %>% html_nodes("#main h3") %>% html_text(raw)
cri.rate = raw %>% html_nodes(".clamp-metascore .positive,.clamp-metascore .mixed,.clamp-metascore .negative") %>% html_text(raw)
user.rate = raw %>% html_nodes(".user") %>% html_text(raw)
cri.rate = as.integer(cri.rate)
user.rate = as.double(user.rate)
content = raw %>% html_nodes(".summary") %>% html_text(raw)
date = raw %>% html_nodes("#main .label+ span") %>% html_text(raw)
date = as.date(date)
date = strftime(date,format="%m")
docs = data.frame(name,cri.rate,user.rate,date,content)
alldoc = rbind(alldoc,docs)
}
View(alldoc)
write.csv(alldoc,"2015.csv")
plot_ly(alldoc,x=~date,type="histogram")
plot_ly(alldoc,x=~cri.rate,y=~user.rate,type = "scatter",text = ~paste('遊戲名稱: ', name))
plot_ly(alldoc,x=~date,type="histogram")
dat = read.csv("2015.csv")
all = rbind(all,dat)
all =data.frame(name=c(),cri.rate=c(),user.rate=c(),date=c(),content=c())
all = rbind(all,dat)
dat = read.csv("2016.csv")
all = rbind(all,dat)
dat = read.csv("2017.csv")
all = rbind(all,dat)
plot_ly(all,x=~date,type="histogram")
plot_ly(all,x=~cri.rate,y=~user.rate,type = "scatter",text = ~paste('遊戲名稱: ', name))
cordoc = Corpus(VectorSource(all))
cordoc <- tm_map(cordoc, removePunctuation)
cordoc <- tm_map(cordoc, removeNumbers)
cordoc <- tm_map(cordoc, content_transformer(tolower))
cordoc <- tm_map(cordoc, removeWords,stopwords::stopwords(language = "en",source = "snowball"))
cordocPTD <- tm_map(cordoc, PlainTextDocument)
View(cordocPTD)
help(plot_ly)
dat = read.csv("2015.csv")
dat$year = 2015
all =data.frame(name=c(),cri.rate=c(),user.rate=c(),date=c(),content=c())
all =data.frame(name=c(),cri.rate=c(),user.rate=c(),date=c(),content=c(),year=c())
all = rbind(all,dat)
dat = read.csv("2016.csv")
dat$year = 2016
all = rbind(all,dat)
dat = read.csv("2017.csv")
dat$year = 2017
all = rbind(all,dat)
View(all)
plot_ly(all,x=~cri.rate,y=~user.rate,type = "scatter",text = ~paste('遊戲名稱: ', name),color =~year)
all =data.frame(name=c(),cri.rate=c(),user.rate=c(),date=c(),content=c(),year=c())
dat = read.csv("2015.csv")
dat$year = "2015"
dat = read.csv("2016.csv")
dat$year = "2016"
dat = read.csv("2017.csv")
dat$year = "2017"
dat = read.csv("2015.csv")
dat$year = "2015"
all = rbind(all,dat)
dat = read.csv("2016.csv")
dat$year = "2016"
all = rbind(all,dat)
dat = read.csv("2017.csv")
dat$year = "2017"
all = rbind(all,dat)
plot_ly(all,x=~cri.rate,y=~user.rate,type = "scatter",text = ~paste('遊戲名稱: ', name),color =~year)
plot_ly(all,x=~cri.rate,y=~user.rate,type = "scatter",text = ~paste('遊戲名稱: ', name),color =~year)%>%
add_trace(data = all, x = ~cri.rate, y = ~user.rate, mode = "lines")
fit <- lm(cri.rate ~ user.rate, data = all)
plot_ly(all,x=~cri.rate,y=~user.rate,type = "scatter",text = ~paste('遊戲名稱: ', name),color =~year)%>%
add_trace(data = all, x = ~cri.rate, y = fitted(fit), mode = "lines")
plot_ly(all,x=~cri.rate,y=~user.rate,type = "scatter",text = ~paste('遊戲名稱: ', name),color =~year)
write.csv(all,"threeyears.csv")
